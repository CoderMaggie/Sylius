{% set taxAdjustment = constant('Sylius\\Component\\Core\\Model\\AdjustmentInterface::TAX_ADJUSTMENT') %}
{% set shippingAdjustment = constant('Sylius\\Component\\Core\\Model\\AdjustmentInterface::SHIPPING_ADJUSTMENT') %}
{% set orderPromotionAdjustment = constant('Sylius\\Component\\Core\\Model\\AdjustmentInterface::ORDER_PROMOTION_ADJUSTMENT') %}

<div class="table-responsive">
    <table class="table" id="order-review">
        <thead>
            <tr>
                <th colspan="3">{{ 'sylius.ui.product'|trans }}</th>
                <th>Quantity</th>
                <th>{{ 'sylius.ui.unit_price'|trans }}</th>
                <th colspan="2">{{ 'sylius.ui.total'|trans }}</th>
            </tr>
        </thead>
        <tbody>
            {% for item in order.items %}
                {% include 'SyliusWebBundle:Frontend/Checkout/Step/Finalize:_item.html.twig' %}
            {% endfor %}
        </tbody>
        <tfoot>
            <tr>
                <th colspan="5">{{ 'app.ui.order_subtotal'|trans }}</th>
                <th colspan="2">{{ order.subtotal|sylius_price }}</th>
            </tr>
            <tr>
                <th colspan="5">{{ 'app.ui.shipping_fee'|trans }}</th>
                <th colspan="2">{{ order.shippingTotal|sylius_price }}</th>
            </tr>
            <tr>
                <th colspan="5">{{ 'app.ui.tax'|trans }}</th>
                <th colspan="2">{{ order.taxTotal|sylius_price }}</th>
            </tr>
            <tr>
                <th colspan="5">{{ 'app.ui.discount'|trans }}</th>
                <th colspan="2">{{ (-1 * order.orderPromotionTotal)|sylius_price }}</th>
            </tr>
            {% if order.promotionCoupon is not null %}
                <tr>
                    <th colspan="5">{{ 'sylius.ui.coupon'|trans }}</th>
                    <th colspan="2">{{ order.promotionCoupon.code }}</th>
                </tr>
            {% endif %}
            <tr class="total">
                <th colspan="5">{{ 'sylius.ui.grand_total'|trans }}</th>
                <th>{{ order.total|sylius_price }}</th>
            </tr>
        </tfoot>
    </table>
</div>

<div class="row text-center">
    {% if not order.lastShipment == null %}
        <div class="col-md-6">
            <div class="box">
                <h4>{{ 'sylius.ui.shipping_method'|trans }}</h4>
                <p>{{ order.lastShipment.method.name }}</p>
            </div>
        </div>
    {% endif %}
    {% if order.lastPayment %}
        <div class="col-md-6">
            <div class="box">
                <h4>{{ 'sylius.ui.payment_method'|trans }}</h4>
                <p>{{ order.lastPayment.method.name }}</p>
            </div>
        </div>
    {% endif %}
</div>
