{% extends '@SyliusWeb/Frontend/layout.html.twig' %}

{% set taxAdjustment = constant('Sylius\\Component\\Core\\Model\\AdjustmentInterface::TAX_ADJUSTMENT') %}
{% set shippingAdjustment = constant('Sylius\\Component\\Core\\Model\\AdjustmentInterface::SHIPPING_ADJUSTMENT') %}
{% set promotionAdjustment = constant('Sylius\\Component\\Core\\Model\\AdjustmentInterface::PROMOTION_ADJUSTMENT') %}

{% block title %}
    - Summary
{% endblock %}

{% block topbar %}
    <ol class="breadcrumb">
        <li><a href="#">Home</a></li>
        <li>Shopping cart</li>
    </ol>
{% endblock %}

{% block content %}
    <div class="box text-center">
        <div class="row">
            <div class="col-sm-10 col-sm-offset-1">
                <h1>Shopping cart</h1>
                <p class="text-muted">You currently have {{ cart.items|length }} item{% if cart.items|length != 1 %}s{% endif %} in your cart.</p>
            </div>
        </div>
    </div>

    {{ parent() }}

    <div class="row">
        <form action="{{ path('sylius_cart_save') }}" method="post" novalidate>
        <div class="col-md-9 clearfix" id="cart">
            {% if not cart.empty %}

            <div class="box">

                {% include '@SyliusWeb/Frontend/Cart/_cart.html.twig' %}
            </div>

            {% endif %}

            <div class="spacer-50">&nbsp;</div>
            <div class="row">
                <div class="col-md-3">
                    <div class="box">
                        <h3 class="text-muted">You may also like these products</h3>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="product">
                        <div class="image" style="height:184px;">
                            <a href="#">
                                <img src="{{ asset('bundles/syliusweb/img/logo.png') }}" class="image1 img-responsive">
                            </a>
                        </div>
                        <div class="text">
                            <p class="price">£143.00</p>
                        </div>
                    </div>
                </div>                <div class="col-md-3">
                    <div class="product">
                        <div class="image" style="height:184px;">
                            <a href="#">
                                <img src="{{ asset('bundles/syliusweb/img/logo.png') }}" class="image1 img-responsive">
                            </a>
                        </div>
                        <div class="text">
                            <p class="price">£143.00</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3">
                    <div class="product">
                        <div class="image" style="height:184px;">
                            <a href="#">
                                <img src="{{ asset('bundles/syliusweb/img/logo.png') }}" class="image1 img-responsive">
                            </a>
                        </div>
                        <div class="text">
                            <p class="price">£143.00</p>
                        </div>
                    </div>
                </div>
            </div>

        </div>

        <div class="col-md-3">
            {% if not cart.empty %}
            <div class="box" id="order-summary">
                <div class="box-header">
                    <h3>Order summary</h3>
                </div>
                <p class="text-muted">Shipping and additional costs are calculated based on the values you have entered.</p>
                <div class="table-responsive">
                    <table class="table">
                        <tbody>
                            <tr>
                                <td>Order subtotal</td>
                                <th>{{ cart.itemsTotal|sylius_price }}</th>
                            </tr>
                            <tr>
                                <td>Shipping</td>
                                {% set shippingTotal = cart.adjustmentsTotal(taxAdjustment) + cart.adjustmentsTotal(shippingAdjustment) %}
                                <th>{{ shippingTotal|sylius_price }}</th>
                            </tr>
                            <tr>
                                <td>Tax</td>
                                <th>{{ cart.getAdjustmentsTotalRecursively(taxAdjustment)|sylius_price }}</th>
                            </tr>
                            <tr>
                                <td>Discount</td>
                                <th>{{ (-1 * cart.adjustmentsTotalRecursively(promotionAdjustment))|sylius_price }}</th>
                            </tr>
                            <tr class="total">
                                <td>Grand total</td>
                                <th>{{ cart.total|sylius_price }}</th>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            {% endif %}

            <div class="box">
                <div class="box-header">
                    <h4>Coupon code</h4>
                </div>
                <p class="text-muted">If you have a coupon code, please enter it in the box below.</p>
                <div class="input-group">
                    {{ form_row(form.promotionCoupon, {'label': false}) }}

                    <span class="input-group-btn">
                        <button type="submit" class="btn btn-primary"><i class="fa fa-gift"></i></button>
                    </span>
                </div>
            </div>
        </div>
            <div class="hidden">
                {{ form_rest(form) }}
            </div>
        </form>
    </div>
{% endblock %}
